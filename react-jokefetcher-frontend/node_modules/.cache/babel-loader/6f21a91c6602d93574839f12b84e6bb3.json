{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\frede\\\\Desktop\\\\3.Semester\\\\ca3_frontend\\\\react-jokefetcher-frontend\\\\src\\\\App.js\";\nimport React, { useState, useEffect } from \"react\";\nimport \"./App.css\";\nimport { Switch, Route, NavLink } from \"react-router-dom\";\nimport jwt_decode from \"jwt-decode\";\n\nfunction App({\n  apiFetchFacade,\n  authFacade\n}) {\n  let token = localStorage.getItem(\"jwtToken\");\n  const [loggedIn, setLoggedIn] = useState(token !== undefined);\n  const [role, setRole] = useState(\"\");\n\n  const logout = () => {\n    authFacade.logout();\n    setLoggedIn(false);\n    updateRoles();\n  };\n\n  const login = (user, pass) => {\n    authFacade.login(user, pass).then(res => setLoggedIn(true)).then(res => updateRoles()).catch(res => alert(\"Status code : \" + res.status + \" Wrong username or password.\"));\n  };\n\n  function updateRoles() {\n    token = localStorage.getItem(\"jwtToken\");\n\n    if (token) {\n      var decoded = jwt_decode(token);\n      setRole(decoded.roles);\n    } else {\n      setRole(null);\n    }\n  }\n\n  useEffect(() => {\n    token = localStorage.getItem(\"jwtToken\");\n\n    if (token) {\n      var decoded = jwt_decode(token);\n      setLoggedIn(true);\n      setRole(decoded.roles);\n    }\n  }, []);\n  console.log(role);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"App\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    loggedIn: loggedIn,\n    role: role,\n    logout: logout,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 7\n    }\n  }), loggedIn && /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/fetch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(ApiFetch, {\n    apiFetchFacade: apiFetchFacade,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 13\n    }\n  })), role === \"admin\" && /*#__PURE__*/React.createElement(Route, {\n    path: \"/custompage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Custompage, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NoMatch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 13\n    }\n  }))), !loggedIn && /*#__PURE__*/React.createElement(Switch, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Route, {\n    path: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Home, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    exact: true,\n    path: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LogIn, {\n    login: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Route, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(LogIn, {\n    login: login,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 13\n    }\n  }))));\n}\n\nfunction LogIn({\n  login\n}) {\n  const init = {\n    username: \"\",\n    password: \"\"\n  };\n  const [loginCredentials, setLoginCredentials] = useState(init);\n\n  const performLogin = evt => {\n    evt.preventDefault();\n    login(loginCredentials.username, loginCredentials.password);\n  };\n\n  const onChange = evt => {\n    setLoginCredentials({ ...loginCredentials,\n      [evt.target.id]: evt.target.value\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, \"Login\"), /*#__PURE__*/React.createElement(\"form\", {\n    onChange: onChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"User Name\",\n    id: \"username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    placeholder: \"Password\",\n    id: \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: performLogin,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 9\n    }\n  }, \"Login\")));\n}\n\nfunction Header({\n  role,\n  loggedIn,\n  logout\n}) {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    className: \"header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 7\n    }\n  }, loggedIn ? /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    activeClassName: \"active\",\n    to: \"/home\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 15\n    }\n  }, \"Home\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    activeClassName: \"active\",\n    to: \"/fetch\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 15\n    }\n  }, \"Api Fetch\")), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    exact: true,\n    activeClassName: \"active\",\n    onClick: logout,\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Logout\"))) : /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    exact: true,\n    activeClassName: \"active\",\n    to: \"/\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, \"Login\")), role === \"admin\" && /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NavLink, {\n    activeClassName: \"active\",\n    to: \"/custompage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 13\n    }\n  }, \"Custom page\"))));\n}\n\nfunction NoMatch() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, \"No match for that route\"));\n}\n\nfunction Capatialize(prop) {\n  return prop.charAt(0).toUpperCase() + prop.slice(1);\n}\n\nfunction Home() {\n  const [username, setUsername] = useState(\"\");\n  const [role, setRole] = useState(\"\");\n  useEffect(() => {\n    var token = localStorage.getItem(\"jwtToken\");\n    var decoded = jwt_decode(token);\n    setUsername(Capatialize(decoded.username));\n    setRole(decoded.roles);\n  }, []);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 5\n    }\n  }, !username === \"\" && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 9\n    }\n  }, \"Welcome \", username, \" you're logged in with the role: \", role), username === \"\" && /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 27\n    }\n  }, \"Welcome please log in.\"));\n}\n\nfunction Custompage() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 7\n    }\n  }, \"Only admins can see this special and important message\"));\n}\n\nfunction Table(props) {\n  if (props === undefined || props === null || props.scanner === undefined || props.scanner.Places === undefined) return /*#__PURE__*/React.createElement(React.Fragment, null);\n  return /*#__PURE__*/React.createElement(\"table\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 11\n    }\n  }, \"PlaceId\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 11\n    }\n  }, \"PlaceName\"), /*#__PURE__*/React.createElement(\"th\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 11\n    }\n  }, \"CountryId\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }\n  }, props.scanner.Places.map(place => DisplayPlace(place))));\n}\n\nfunction DisplayPlace(place) {\n  return /*#__PURE__*/React.createElement(\"tr\", {\n    key: place.PlaceId,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }\n  }, place.PlaceId), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }\n  }, place.PlaceName), /*#__PURE__*/React.createElement(\"td\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 7\n    }\n  }, place.CountryId));\n}\n\nfunction ApiFetch({\n  apiFetchFacade\n}) {\n  const [ca3fetch, setCa3fetch] = useState([]);\n  useEffect(() => {\n    apiFetchFacade().getApiFetch().then(data => {\n      setCa3fetch({ ...data\n      });\n    });\n  }, [apiFetchFacade]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"ul\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 9\n    }\n  }, \"Chuck joke : \", ca3fetch.chuckJoke), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, \"Chuck joke url : \", ca3fetch.chuckJokeURL), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 9\n    }\n  }, \"Dad joke : \", ca3fetch.dadJoke), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 9\n    }\n  }, \"Dad joke url : \", ca3fetch.dadJokeURL), /*#__PURE__*/React.createElement(Table, {\n    scanner: ca3fetch.scanner,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 244,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"li\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 245,\n      columnNumber: 9\n    }\n  }, \"Dog Message :\", \" \", /*#__PURE__*/React.createElement(\"img\", {\n    src: ca3fetch.dogDTOMessage,\n    alt: ca3fetch.dogDTOMessage,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 11\n    }\n  }))));\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/frede/Desktop/3.Semester/ca3_frontend/react-jokefetcher-frontend/src/App.js"],"names":["React","useState","useEffect","Switch","Route","NavLink","jwt_decode","App","apiFetchFacade","authFacade","token","localStorage","getItem","loggedIn","setLoggedIn","undefined","role","setRole","logout","updateRoles","login","user","pass","then","res","catch","alert","status","decoded","roles","console","log","LogIn","init","username","password","loginCredentials","setLoginCredentials","performLogin","evt","preventDefault","onChange","target","id","value","Header","NoMatch","Capatialize","prop","charAt","toUpperCase","slice","Home","setUsername","Custompage","Table","props","scanner","Places","map","place","DisplayPlace","PlaceId","PlaceName","CountryId","ApiFetch","ca3fetch","setCa3fetch","getApiFetch","data","chuckJoke","chuckJokeURL","dadJoke","dadJokeURL","dogDTOMessage"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAO,WAAP;AACA,SAASC,MAAT,EAAiBC,KAAjB,EAAwBC,OAAxB,QAAuC,kBAAvC;AACA,OAAOC,UAAP,MAAuB,YAAvB;;AAEA,SAASC,GAAT,CAAa;AAAEC,EAAAA,cAAF;AAAkBC,EAAAA;AAAlB,CAAb,EAA6C;AAC3C,MAAIC,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AAEA,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0Bb,QAAQ,CAACS,KAAK,KAAKK,SAAX,CAAxC;AACA,QAAM,CAACC,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;;AAEA,QAAMiB,MAAM,GAAG,MAAM;AACnBT,IAAAA,UAAU,CAACS,MAAX;AACAJ,IAAAA,WAAW,CAAC,KAAD,CAAX;AACAK,IAAAA,WAAW;AACZ,GAJD;;AAMA,QAAMC,KAAK,GAAG,CAACC,IAAD,EAAOC,IAAP,KAAgB;AAC5Bb,IAAAA,UAAU,CACPW,KADH,CACSC,IADT,EACeC,IADf,EAEGC,IAFH,CAESC,GAAD,IAASV,WAAW,CAAC,IAAD,CAF5B,EAGGS,IAHH,CAGSC,GAAD,IAASL,WAAW,EAH5B,EAIGM,KAJH,CAIUD,GAAD,IACLE,KAAK,CAAC,mBAAmBF,GAAG,CAACG,MAAvB,GAAgC,8BAAjC,CALT;AAOD,GARD;;AAUA,WAASR,WAAT,GAAuB;AACrBT,IAAAA,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAR;;AACA,QAAIF,KAAJ,EAAW;AACT,UAAIkB,OAAO,GAAGtB,UAAU,CAACI,KAAD,CAAxB;AACAO,MAAAA,OAAO,CAACW,OAAO,CAACC,KAAT,CAAP;AACD,KAHD,MAGO;AACLZ,MAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF;;AAEDf,EAAAA,SAAS,CAAC,MAAM;AACdQ,IAAAA,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAR;;AACA,QAAIF,KAAJ,EAAW;AACT,UAAIkB,OAAO,GAAGtB,UAAU,CAACI,KAAD,CAAxB;AACAI,MAAAA,WAAW,CAAC,IAAD,CAAX;AACAG,MAAAA,OAAO,CAACW,OAAO,CAACC,KAAT,CAAP;AACD;AACF,GAPQ,EAON,EAPM,CAAT;AASAC,EAAAA,OAAO,CAACC,GAAR,CAAYf,IAAZ;AACA,sBACE;AAAK,IAAA,SAAS,EAAC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,MAAD;AAAQ,IAAA,QAAQ,EAAEH,QAAlB;AAA4B,IAAA,IAAI,EAAEG,IAAlC;AAAwC,IAAA,MAAM,EAAEE,MAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEGL,QAAQ,iBACP,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,QAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,cAAc,EAAEL,cAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,EAIGQ,IAAI,KAAK,OAAT,iBACC,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,aAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CALJ,eASE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CATF,CAHJ,EAiBG,CAACH,QAAD,iBACC,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,IAAI,EAAC,OAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,IAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CADF,eAIE,oBAAC,KAAD;AAAO,IAAA,KAAK,MAAZ;AAAa,IAAA,IAAI,EAAC,GAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEO,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAJF,eAOE,oBAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,KAAD;AAAO,IAAA,KAAK,EAAEA,KAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAPF,CAlBJ,CADF;AAiCD;;AAED,SAASY,KAAT,CAAe;AAAEZ,EAAAA;AAAF,CAAf,EAA0B;AACxB,QAAMa,IAAI,GAAG;AAAEC,IAAAA,QAAQ,EAAE,EAAZ;AAAgBC,IAAAA,QAAQ,EAAE;AAA1B,GAAb;AACA,QAAM,CAACC,gBAAD,EAAmBC,mBAAnB,IAA0CpC,QAAQ,CAACgC,IAAD,CAAxD;;AAEA,QAAMK,YAAY,GAAIC,GAAD,IAAS;AAC5BA,IAAAA,GAAG,CAACC,cAAJ;AACApB,IAAAA,KAAK,CAACgB,gBAAgB,CAACF,QAAlB,EAA4BE,gBAAgB,CAACD,QAA7C,CAAL;AACD,GAHD;;AAIA,QAAMM,QAAQ,GAAIF,GAAD,IAAS;AACxBF,IAAAA,mBAAmB,CAAC,EAClB,GAAGD,gBADe;AAElB,OAACG,GAAG,CAACG,MAAJ,CAAWC,EAAZ,GAAiBJ,GAAG,CAACG,MAAJ,CAAWE;AAFV,KAAD,CAAnB;AAID,GALD;;AAOA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,eAEE;AAAM,IAAA,QAAQ,EAAEH,QAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAO,IAAA,WAAW,EAAC,WAAnB;AAA+B,IAAA,EAAE,EAAC,UAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAO,IAAA,WAAW,EAAC,UAAnB;AAA8B,IAAA,EAAE,EAAC,UAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,eAGE;AAAQ,IAAA,OAAO,EAAEH,YAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aAHF,CAFF,CADF;AAUD;;AAED,SAASO,MAAT,CAAgB;AAAE7B,EAAAA,IAAF;AAAQH,EAAAA,QAAR;AAAkBK,EAAAA;AAAlB,CAAhB,EAA4C;AAC1C,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAI,IAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGL,QAAQ,gBACP,uDACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,eAAe,EAAC,QAAzB;AAAkC,IAAA,EAAE,EAAC,OAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADF,CADF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,eAAe,EAAC,QAAzB;AAAkC,IAAA,EAAE,EAAC,QAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADF,CANF,eAWE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAe,IAAA,eAAe,EAAC,QAA/B;AAAwC,IAAA,OAAO,EAAEK,MAAjD;AAAyD,IAAA,EAAE,EAAC,GAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,CAXF,CADO,gBAmBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,KAAK,MAAd;AAAe,IAAA,eAAe,EAAC,QAA/B;AAAwC,IAAA,EAAE,EAAC,GAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aADF,CApBJ,EA0BGF,IAAI,KAAK,OAAT,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAS,IAAA,eAAe,EAAC,QAAzB;AAAkC,IAAA,EAAE,EAAC,aAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,CA3BJ,CADF,CADF;AAsCD;;AAED,SAAS8B,OAAT,GAAmB;AACjB,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,+BADF,CADF;AAKD;;AAED,SAASC,WAAT,CAAqBC,IAArB,EAA2B;AACzB,SAAOA,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,WAAf,KAA+BF,IAAI,CAACG,KAAL,CAAW,CAAX,CAAtC;AACD;;AAED,SAASC,IAAT,GAAgB;AACd,QAAM,CAAClB,QAAD,EAAWmB,WAAX,IAA0BpD,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACe,IAAD,EAAOC,OAAP,IAAkBhB,QAAQ,CAAC,EAAD,CAAhC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACd,QAAIQ,KAAK,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAZ;AACA,QAAIgB,OAAO,GAAGtB,UAAU,CAACI,KAAD,CAAxB;AACA2C,IAAAA,WAAW,CAACN,WAAW,CAACnB,OAAO,CAACM,QAAT,CAAZ,CAAX;AACAjB,IAAAA,OAAO,CAACW,OAAO,CAACC,KAAT,CAAP;AACD,GALQ,EAKN,EALM,CAAT;AAOA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,CAACK,QAAD,KAAc,EAAd,iBACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBACWA,QADX,uCACsDlB,IADtD,CAFJ,EAMGkB,QAAQ,KAAK,EAAb,iBAAmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8BANtB,CADF;AAUD;;AAED,SAASoB,UAAT,GAAsB;AACpB,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8DADF,CADF;AAKD;;AAED,SAASC,KAAT,CAAeC,KAAf,EAAsB;AACpB,MACEA,KAAK,KAAKzC,SAAV,IACAyC,KAAK,KAAK,IADV,IAEAA,KAAK,CAACC,OAAN,KAAkB1C,SAFlB,IAGAyC,KAAK,CAACC,OAAN,CAAcC,MAAd,KAAyB3C,SAJ3B,EAME,oBAAO,yCAAP;AACF,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,eADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBAHF,CADF,CADF,eAQE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAQyC,KAAK,CAACC,OAAN,CAAcC,MAAd,CAAqBC,GAArB,CAA0BC,KAAD,IAAWC,YAAY,CAACD,KAAD,CAAhD,CAAR,CARF,CADF;AAYD;;AAED,SAASC,YAAT,CAAsBD,KAAtB,EAA6B;AAC3B,sBACE;AAAI,IAAA,GAAG,EAAEA,KAAK,CAACE,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,KAAK,CAACE,OAAX,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKF,KAAK,CAACG,SAAX,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAKH,KAAK,CAACI,SAAX,CAHF,CADF;AAOD;;AAED,SAASC,QAAT,CAAkB;AAAEzD,EAAAA;AAAF,CAAlB,EAAsC;AACpC,QAAM,CAAC0D,QAAD,EAAWC,WAAX,IAA0BlE,QAAQ,CAAC,EAAD,CAAxC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdM,IAAAA,cAAc,GACX4D,WADH,GAEG7C,IAFH,CAES8C,IAAD,IAAU;AACdF,MAAAA,WAAW,CAAC,EAAE,GAAGE;AAAL,OAAD,CAAX;AACD,KAJH;AAKD,GANQ,EAMN,CAAC7D,cAAD,CANM,CAAT;AAQA,sBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAAkB0D,QAAQ,CAACI,SAA3B,CADF,eAEE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAAsBJ,QAAQ,CAACK,YAA/B,CAFF,eAGE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAAgBL,QAAQ,CAACM,OAAzB,CAHF,eAIE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAAoBN,QAAQ,CAACO,UAA7B,CAJF,eAKE,oBAAC,KAAD;AAAO,IAAA,OAAO,EAAEP,QAAQ,CAACT,OAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IALF,eAME;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACgB,GADhB,eAEE;AAAK,IAAA,GAAG,EAAES,QAAQ,CAACQ,aAAnB;AAAkC,IAAA,GAAG,EAAER,QAAQ,CAACQ,aAAhD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CANF,CADF,CADF;AAeD;;AAED,eAAenE,GAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport \"./App.css\";\r\nimport { Switch, Route, NavLink } from \"react-router-dom\";\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\nfunction App({ apiFetchFacade, authFacade }) {\r\n  let token = localStorage.getItem(\"jwtToken\");\r\n\r\n  const [loggedIn, setLoggedIn] = useState(token !== undefined);\r\n  const [role, setRole] = useState(\"\");\r\n\r\n  const logout = () => {\r\n    authFacade.logout();\r\n    setLoggedIn(false);\r\n    updateRoles();\r\n  };\r\n\r\n  const login = (user, pass) => {\r\n    authFacade\r\n      .login(user, pass)\r\n      .then((res) => setLoggedIn(true))\r\n      .then((res) => updateRoles())\r\n      .catch((res) =>\r\n        alert(\"Status code : \" + res.status + \" Wrong username or password.\")\r\n      );\r\n  };\r\n\r\n  function updateRoles() {\r\n    token = localStorage.getItem(\"jwtToken\");\r\n    if (token) {\r\n      var decoded = jwt_decode(token);\r\n      setRole(decoded.roles);\r\n    } else {\r\n      setRole(null);\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    token = localStorage.getItem(\"jwtToken\");\r\n    if (token) {\r\n      var decoded = jwt_decode(token);\r\n      setLoggedIn(true);\r\n      setRole(decoded.roles);\r\n    }\r\n  }, []);\r\n\r\n  console.log(role);\r\n  return (\r\n    <div className=\"App\">\r\n      <Header loggedIn={loggedIn} role={role} logout={logout} />\r\n      {loggedIn && (\r\n        <Switch>\r\n          <Route path=\"/fetch\">\r\n            <ApiFetch apiFetchFacade={apiFetchFacade} />\r\n          </Route>\r\n          {role === \"admin\" && (\r\n            <Route path=\"/custompage\">\r\n              <Custompage />\r\n            </Route>\r\n          )}\r\n          <Route>\r\n            <NoMatch />\r\n          </Route>\r\n        </Switch>\r\n      )}\r\n      {!loggedIn && (\r\n        <Switch>\r\n          <Route path=\"/home\">\r\n            <Home />\r\n          </Route>\r\n          <Route exact path=\"/\">\r\n            <LogIn login={login} />\r\n          </Route>\r\n          <Route>\r\n            <LogIn login={login} />\r\n          </Route>\r\n        </Switch>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction LogIn({ login }) {\r\n  const init = { username: \"\", password: \"\" };\r\n  const [loginCredentials, setLoginCredentials] = useState(init);\r\n\r\n  const performLogin = (evt) => {\r\n    evt.preventDefault();\r\n    login(loginCredentials.username, loginCredentials.password);\r\n  };\r\n  const onChange = (evt) => {\r\n    setLoginCredentials({\r\n      ...loginCredentials,\r\n      [evt.target.id]: evt.target.value,\r\n    });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Login</h2>\r\n      <form onChange={onChange}>\r\n        <input placeholder=\"User Name\" id=\"username\" />\r\n        <input placeholder=\"Password\" id=\"password\" />\r\n        <button onClick={performLogin}>Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Header({ role, loggedIn, logout }) {\r\n  return (\r\n    <div>\r\n      <ul className=\"header\">\r\n        {loggedIn ? (\r\n          <>\r\n            <li>\r\n              <NavLink activeClassName=\"active\" to=\"/home\">\r\n                Home\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink activeClassName=\"active\" to=\"/fetch\">\r\n                Api Fetch\r\n              </NavLink>\r\n            </li>\r\n            <li>\r\n              <NavLink exact activeClassName=\"active\" onClick={logout} to=\"/\">\r\n                Logout\r\n              </NavLink>\r\n            </li>\r\n          </>\r\n        ) : (\r\n          <li>\r\n            <NavLink exact activeClassName=\"active\" to=\"/\">\r\n              Login\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n        {role === \"admin\" && (\r\n          <li>\r\n            <NavLink activeClassName=\"active\" to=\"/custompage\">\r\n              Custom page\r\n            </NavLink>\r\n          </li>\r\n        )}\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction NoMatch() {\r\n  return (\r\n    <div>\r\n      <h3>No match for that route</h3>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Capatialize(prop) {\r\n  return prop.charAt(0).toUpperCase() + prop.slice(1);\r\n}\r\n\r\nfunction Home() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [role, setRole] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    var token = localStorage.getItem(\"jwtToken\");\r\n    var decoded = jwt_decode(token);\r\n    setUsername(Capatialize(decoded.username));\r\n    setRole(decoded.roles);\r\n  }, []);\r\n\r\n  return (\r\n    <div>\r\n      {!username === \"\" && (\r\n        <h2>\r\n          Welcome {username} you're logged in with the role: {role}\r\n        </h2>\r\n      )}\r\n      {username === \"\" && <h2>Welcome please log in.</h2>}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Custompage() {\r\n  return (\r\n    <div>\r\n      <h2>Only admins can see this special and important message</h2>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Table(props) {\r\n  if (\r\n    props === undefined ||\r\n    props === null ||\r\n    props.scanner === undefined ||\r\n    props.scanner.Places === undefined\r\n  )\r\n    return <></>;\r\n  return (\r\n    <table>\r\n      <thead>\r\n        <tr>\r\n          <th>PlaceId</th>\r\n          <th>PlaceName</th>\r\n          <th>CountryId</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>{props.scanner.Places.map((place) => DisplayPlace(place))}</tbody>\r\n    </table>\r\n  );\r\n}\r\n\r\nfunction DisplayPlace(place) {\r\n  return (\r\n    <tr key={place.PlaceId}>\r\n      <td>{place.PlaceId}</td>\r\n      <td>{place.PlaceName}</td>\r\n      <td>{place.CountryId}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nfunction ApiFetch({ apiFetchFacade }) {\r\n  const [ca3fetch, setCa3fetch] = useState([]);\r\n\r\n  useEffect(() => {\r\n    apiFetchFacade()\r\n      .getApiFetch()\r\n      .then((data) => {\r\n        setCa3fetch({ ...data });\r\n      });\r\n  }, [apiFetchFacade]);\r\n\r\n  return (\r\n    <div>\r\n      <ul>\r\n        <li>Chuck joke : {ca3fetch.chuckJoke}</li>\r\n        <li>Chuck joke url : {ca3fetch.chuckJokeURL}</li>\r\n        <li>Dad joke : {ca3fetch.dadJoke}</li>\r\n        <li>Dad joke url : {ca3fetch.dadJokeURL}</li>\r\n        <Table scanner={ca3fetch.scanner} />\r\n        <li>\r\n          Dog Message :{\" \"}\r\n          <img src={ca3fetch.dogDTOMessage} alt={ca3fetch.dogDTOMessage}></img>\r\n        </li>\r\n      </ul>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n"]},"metadata":{},"sourceType":"module"}